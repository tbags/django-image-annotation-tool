<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="UTF-8">
    <!--
        VGG Image Annotator (via)
        www.robots.ox.ac.uk/~vgg/software/via/

        Copyright (c) 2016, Abhishek Dutta.
        All rights reserved.

        Redistribution and use in source and binary forms, with or without
        modification, are permitted provided that the following conditions are met:

        Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
        Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
        AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
        ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
        LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
        CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
        SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
        INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
        CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
        ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
        POSSIBILITY OF SUCH DAMAGE.

      -->
    <title>Image Annotator</title>
    <!--meta name="author" content="Abhishek Dutta"-->
    <!--meta name="description" content="copied from: VIA is a standalone image annotator application packaged as a single HTML file (< 200 KB) that runs on most modern web browsers."-->
    {% load static from staticfiles %}
    <link href="{% static '/canvas.css' %}" type="text/css" rel="stylesheet">
    <!-- Google analytics : used in Seebibyte project to measure impact -->
    <script type="text/javascript">
      //<!--AUTO_INSERT_GOOGLE_ANALYTICS_JS_HERE-->
(
  function(i,s,o,g,r,a,m){
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function(){
      (i[r].q=i[r].q||[]).push(arguments)
    },
    i[r].l=1*new Date();
    a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];
    a.async=1;
    a.src=g;
    m.parentNode.insertBefore(a,m)
  }
)(window,document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-20555581-2', 'auto');
ga('send', 'pageview');

    </script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- CSS style linking -->

  </head>

  <body onload="_via_init()" onresize="_via_update_ui_components()">
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
        <symbol id="shape_rectangle">
          <title>Rectangular region shape</title>
          <rect width="20" height="12" x="6" y="10" />
        </symbol>
        <symbol id="shape_circle">
          <title>Circular region shape</title>
          <circle r="10" cx="16" cy="16" />
        </symbol>
        <symbol id="shape_ellipse">
          <title>Elliptical region shape</title>
          <ellipse rx="12" ry="8" cx="16" cy="16" />
        </symbol>
        <symbol id="shape_polygon">
          <title>Polyline region shape</title>
          <path d="M 15.25,2.2372 3.625,11.6122 6,29.9872 l 20.75,-9.625 2.375,-14.75 z" />
        </symbol>
        <symbol id="shape_point">
          <title>Point region shape</title>
          <circle r="4" cx="16" cy="16" style="fill: #000000"/>
        </symbol>
      </defs>
    </svg>

    <div class="top_panel" id="ui_top_panel">
      <!-- Navigation menu -->
      <div class="navbar">
        <ul>
          <li><a onclick="show_home_panel()" title="Home">Home</a></li>
          <li class="dropdown"><a title="Image" class="drop_menu_item">Image &#9662;</a>
            <div class="dropdown-content">
              <a onclick="sel_local_images()" title="Load (or add) a set of images from local disk">Load or Add Images</a>
              <a onclick="show_img_list()" title="Browse currently loaded images">List Images</a>
            </div>
          </li>
          <li class="dropdown"><a title="Annotations" class="drop_menu_item">Annotation &#9662;</a>
            <div class="dropdown-content">
              <a onclick="download_all_region_data('csv')" title="Save image region annotations as a CSV(comma separated value) file">Save as CSV</a>
              <a onclick="download_all_region_data('json')" title="Save image region annotations as a JSON(Javascript Object Notation) file">Save as JSON</a>
              <a onclick="sel_local_data_file('annotations')" title="Import existing region data from CSV or JSON file">Import</a>
            </div>
          </li>
          <li class="dropdown"><a title="View" class="drop_menu_item">View &#9662;</a>
            <div class="dropdown-content">
              <a onclick="toggle_region_boundary_visibility()" title="Show or hide region boundaries">Show/hide region boundaries</a>
          <a onclick="toggle_region_id_visibility()" title="Show or hide region label">Show/hide region label</a>
          </div>
          </li>
          <li class="dropdown"><a onclick="show_about_panel()" title="Help">Help &#9662;</a>
            <div class="dropdown-content">
              <a onclick="show_getting_started_panel()" title="Getting started with VGG Image Annotator (VIA)">Getting Started</a>
              <a onclick="show_about_panel()" title="About VGG Image Annotator (VIA)">About</a>
            </div>
          </li>
          <li><a onclick="submit_annotation()" title="SubmitAnnotation">Annotate</a></li>
        </ul>

      </div> <!-- end of #navbar -->

      <!-- Shortcut toolbar -->
      <div class="toolbar">
        <ul>
          <li onclick="sel_local_images()" title="Load or Add Images">&ctdot;</li>
          <li onclick="sel_local_data_file('annotations')" title="Import Annotations">&uarr;</li>
          <li onclick="download_all_region_data('csv')" title="Save Annotations (as CSV)">&DownArrowBar;</li>

          <li style="margin-left: 2em;" onclick="move_to_prev_image()" title="Previous Image">&larr;</li>
          <li onclick="move_to_next_image()" title="Next Image">&rarr;</li>
          <li onclick="toggle_img_list()" title="List Images">&#9776;</li>

          <li style="margin-left: 2em;" onclick="zoom_out()" title="Zoom Out">&minus;</li>
          <li onclick="zoom_in()" title="Zoom In">&plus;</li>
          <li onclick="reset_zoom_level()" title="Zoom Reset">&equals;</li>

          <li style="margin-left: 2em;" onclick="copy_sel_regions()" title="Copy Region">c</li>
          <li onclick="paste_sel_regions()" title="Paste Region">v</li>
          <li onclick="sel_all_regions()" title="Select All Regions">a</li>
          <li onclick="del_sel_regions()" title="Delete Region">&times;</li>
        </ul>
      </div> <!-- endof #toolbar -->
      <input type="file" id="invisible_file_input" multiple name="files[]" style="display:none">
    </div> <!-- endof #top_panel -->

    <!-- Middle Panel contains a left-sidebar and image display areas -->
    <div class="middle_panel">
      <div id="leftsidebar">
    <button onclick="toggle_accordion_panel(this)" class="leftsidebar_accordion active">Image</button>
    <div class="leftsidebar_accordion_panel show" id="fileinfo">Images not loaded yet!</div>

        <button onclick="toggle_accordion_panel(this)" class="leftsidebar_accordion active">Region Shape</button>
        <div class="leftsidebar_accordion_panel show" id="accordion_region_shape_panel">
          <ul class="region_shape">
            <li id="region_shape_rect" class="selected" onclick="select_region_shape('rect')" title="Rectangle"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_rectangle"></use></svg></li>
            <li id="region_shape_circle" onclick="select_region_shape('circle')" title="Circle"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_circle"></use></svg></li>
            <li id="region_shape_ellipse" onclick="select_region_shape('ellipse')" title="Ellipse"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_ellipse"></use></svg></li>
            <li id="region_shape_polygon" onclick="select_region_shape('polygon')" title="Polygon"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_polygon"></use></svg></li>
            <li id="region_shape_point" onclick="select_region_shape('point')" title="Point"><svg height="32" viewbox="0 0 32 32"><use xlink:href="#shape_point"></use></svg></li>
          </ul>
        </div>

        <button onclick="toggle_reg_attr_panel()" class="leftsidebar_accordion" id="reg_attr_panel_button">Region Attributes</button>
        <button onclick="toggle_file_attr_panel()" class="leftsidebar_accordion" id="file_attr_panel_button">File Attributes</button>

        <button onclick="toggle_accordion_panel(this)" class="leftsidebar_accordion">Keyboard Shortcuts</button>
        <div class="leftsidebar_accordion_panel">
          <table style="padding: 2em 0em;">
            <tr>
              <td style="width: 6em;">n/p (&larr;/&rarr;)</td>
              <td>Next/Previous image</td>
            </tr>
            <tr>
              <td>+&nbsp;/&nbsp;-&nbsp;/&nbsp;=</td>
              <td>Zoom in/out/reset</td>
            </tr>
            <tr>
              <td>Ctrl + c</td>
              <td>Copy sel. regions</td>
            </tr>
            <tr>
              <td>Ctrl + v</td>
              <td>Paste sel. regions</td>
            </tr>
            <tr>
              <td>Ctrl + a</td>
              <td>Select all regions</td>
            </tr>
            <tr>
              <td>Del, Bkspc</td>
              <td>Delete image region</td>
            </tr>
            <tr>
              <td>Esc</td>
              <td>Cancel operation</td>
            </tr>
            <tr>
              <td>r</td>
              <td>Show/hide regions</td>
            </tr>
            <tr>
              <td>i</td>
              <td>Show/hide reg. label</td>
            </tr>
            <tr>
              <td>Ctrl + s</td>
              <td>Download annotations</td>
            </tr>
          </table>
        </div>

        <button onclick="toggle_img_list(this)" class="leftsidebar_accordion" id="image_list_panel_button">Image List</button>
        <div id="img_list_panel"></div>
      </div>

      <!-- Main display area: contains image canvas, ... -->
      <div id="display_area">
        <div id="canvas_panel">
          <canvas id="image_canvas"></canvas>
          <canvas id="region_canvas">Sorry, your browser does not support HTML5 Canvas functionality which is required for this application.</canvas>
        </div>

        <div id="text_panel">
          <div id="via_start_info_panel">Starting VGG Image Annotator ...</div>

          <div class="text_panel" id="about_panel">
            <h1>VGG Image Annotator (VIA)</h1>
            <p style="font-family: Mono; font-size: small;">version <a href="https://gitlab.com/vgg/via/raw/master/CHANGELOG">0.1<a/> (Jan. 2017)</p>
            <p>
              VGG Image Annotator (VIA) is an <a href="https://gitlab.com/vgg/via/">open source project</a>
              developed at the <a href="http://www.robots.ox.ac.uk/~vgg/">Visual Geometry Group</a>
              and released under the BSD-2 clause <a href="https://gitlab.com/vgg/via/blob/master/LICENSE">license</a>.
              With this standalone application, you can define regions in an image and create a textual description of those regions.
              Such image regions and descriptions are useful for supervised training of learning algorithms.
            </p>
            <p>
              Features:
              <ul>
                <li>based solely on HTML, CSS and Javascript (no dependecies on any javascript libraries)</li>
                <li>can be used offline (complete application packaged in a single html file of size &lt; 200KB)</li>
                <li>requires nothing more than a modern web browser (tested on firefox and chrome)</li>
                <li>supports following region shapes: rectangle, circle, ellipse, polygon</li>
                <li>supports multiple attributes for each image region</li>
                <li>import (and export) of region data from (to) text file in csv and json format</li>
                <li>hundreds of images can be loaded and annotated without any performance degradation</li>
              </ul>
            </p>
            <p>For more details, visit <a href="http://www.robots.ox.ac.uk/~vgg/software/via/">http://www.robots.ox.ac.uk/~vgg/software/via/</a>.</p>
          </div>

      <div class="text_panel" id="getting_started_panel">
            <h1>Getting Started</h1>
        <ol>
          <li>Click [Image > Load or Add Images] in the top menu bar to load a set of images that you wish to annotate.</li>
          <li>Press n (or p) to navigate through the loaded images. You can also use the &larr; and &rarr; icons in the top panel toolbar for navigation.</li>
          <li>Click <b>Region Attributes</b> in the left panel to reveal a panel in the bottom. Click <b>[Add New]</b> tp add a new attribute. For example:
        <pre>
          object_name
          object_color
        </pre>
        You can add more region attributes according to you needs.
          <li>In the <b>Region Shape</b> section in the left panel, click the rectangular shape</li>
          <li>On the image area, keep pressing the right click button as you drag the mouse cursor. This will draw a rectangular region on the image.</li>
          <li>This newly created region is automatically selected. Now you can enter the attribute value for this region in the bottom panel. For example:
        <pre>
          object_name = dog
          object_color = white
        </pre>
        You can annotate multiple regions in this image or other images and assign a value to each pre-defined attribute.</li>
          <li>To download the annotated region data, click <b>[Annotation > Save as CSV]</b> in the top menu bar. This will download a text file containing region shape and attribute data.</li>
          <li>Next time, you can start from the point your left by first loading the images and then importing the CSV file (downloaded in step 7) by clicking <b>[Annotation > Import]</b>.
        </li></ol>

      </div>

        </div>
      </div>
    </div>

    <!-- Bottom panel is used to display attributes input panel -->
    <div id="bottom_panel">
      <div id="attributes_panel"></div>
    </div>

    <!-- to show status messages -->
    <div id="message_panel"></div>

    {% load static %}
    <script  type="text/javascript" src="{% static 'functional.js' %}"></script>
      <!--AUTO_INSERT_DMIAT_JS_HERE-->
      <!--
/*
  Distributed Manual Image Annotation Tool (DMIAT)
  www.robots.ox.ac.uk/~vgg/software/via/

  Copyright (c) 2016, Abhishek Dutta.
  All rights reserved.

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

  Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.
  Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  POSSIBILITY OF SUCH DAMAGE.
*/

-->


    <!--
    <script type="text/javascript" src="via.js"></script>
    <script type="text/javascript" src="dmiat.js"></script>
    <script type="text/javascript" src="github_auth.js"></script>
    -->
  </body>
</html>
